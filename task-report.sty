%%
%% This is file `task-report.sty',
%% generated with the docstrip utility.
%%
%% The original source files were:
%%
%% task-report.dtx  (with options: `package')
%% 
%% This is a generated file.
%% 
%% Copyright (C) 2021 by Geraldo Xex√©o (xexeo@ufrj.br)
%% 
%% This file may be distributed and/or modified under the conditions of
%% the LaTeX Project Public License, either version 1.3 of this license
%% or (at your option) any later version.  The latest version of this
%% license is in:
%% 
%% http://www.latex-project.org/lppl.txt
%% 
%% and version 1.3 or later is part of all distributions of LaTeX version
%% 2005/12/01 or later.
\NeedsTeXFormat{LaTeX2e}
\def\tr@version{v0.1}
\ProvidesPackage{task-report}[2021/05/31 \tr@version task-report]
%% Set the colors for the 4 types of standard states
\RequirePackage{tcolorbox}%
\RequirePackage{etoolbox}%
\RequirePackage{xstring}%
\newcommand{\taskreportversion}{\tr@version}%
\newcommand{\printtaskreportversion}{task-report v. \taskreportversion}%
%%    \begin{macrocode}
\def\tr@todoboxcolor{red}%
\def\tr@doingboxcolor{yellow}%
\def\tr@tocheckboxcolor{cyan}%
\def\tr@checkingboxcolor{blue}%
\def\tr@doneboxcolor{green}%
\def\tr@otherwisecolor{black}%
\newcommand{\trsetboxcolors}[6]{%
\def\tr@todoboxcolor{#1}%
\def\tr@doingboxcolor{#2}%
\def\tr@tocheckboxcolor{#3}%
\def\tr@checkingcolor{#4}%
\def\tr@doneboxcolor{#5}%
\def\tr@otherwisecolor{#6}%
}%
\def\tr@currentboxcolor{\tr@otherwisecolor}%
\def\traddstatecolor#1#2{%
\@ifundefined{\string\color@#2}{%
\message{#2 not defined}%
\ERROR%
}%
{%
\expandafter\gdef\csname%
tr@astate@\detokenize{#1}\endcsname{#2}%
}}%
\def\tr@usestatecolor#1{%
\ifcsname tr@astate@\detokenize{#1}\endcsname%
\csname tr@astate@\detokenize{#1}\expandafter\endcsname%
\else%
\tr@otherwisecolor%
\fi%
}%
\newcommand{\trstatuscolor}[1]%
{%
    \def\tr@currentboxcolor{\tr@otherwisecolor}%
    \ifblank{#1}{}{%
    \IfStrEqCase{#1}{%
    {todo}{\def\tr@currentboxcolor{\tr@todoboxcolor}}%
    {doing}{\def\tr@currentboxcolor{\tr@doingboxcolor}}%
    {done}{\def\tr@currentboxcolor{\tr@doneboxcolor}}%
    {tocheck}{\def\tr@currentboxcolor{\tr@tocheckboxcolor}}%
    {checking}{\def\tr@currentboxcolor{\tr@checkingboxcolor}}%
    } [%
    \def\tr@currentboxcolor{\tr@usestatecolor{#1}}
]%
    }%
}%
\newcommand{\trstatus}[2][Status]{%
    \textbf{#1}: #2%
}%
\newcommand{\trwhen}[2][Assigned in]{%
    \textbf{#1}: #2%
}%
\newcommand{\trwho}[2][To]{%
    \textbf{#1}: #2%
}%
\newcommand{\trwhat}[2][What]{%
    \textbf{#1}: #2%
}%
\newcommand{\trwhy}[2][Rationale]{%
    \textbf{#1}: #2%
}%
\newcommand{\trtask}[8][]{%
    \par%
    \ifblank{#2}{
    \def\trtask@temp{Task not defined}%
    }%
    {%
    \def\trtask@temp{#2}%
    }%
    \trstatuscolor{#1}%
    \begin{tcolorbox}[title=\textbf{\trtask@temp},%
         colback=\tr@currentboxcolor!5!white,%
         colframe=\tr@currentboxcolor!75!black%
        ]%
        \ifblank{#1}{}%
        {%
            \trstatus{#1}\newline%
        }%
        \ifblank{#3}{}%
        {%
            \trwhen{#3}\newline%
        }%
        \ifblank{#4}{}%
        {%
            \trwho[From]{#4}\newline%
        }%
        \ifblank{#5}{}%
        {%
            \trwho{#5}\newline%
        }%
        \ifblank{#6}{}%
        {%
        \trwhy{#6}\newline%
        }%
        \ifblank{#7}{}%
        {%
            \trwhen[Done in]{#7}\newline%
        }%
        \ifblank{#8}{}%
        {\tcblower%
        #8%
        }%
    \end{tcolorbox}%
}%
\endinput
%%
%% End of file `task-report.sty'.
